{"version":3,"sources":["webpack:///C:/Users/Administrator/WeChatProjects/gb_xi/components/qiun-data-charts/qiun-data-charts.vue?4f66","webpack:///C:/Users/Administrator/WeChatProjects/gb_xi/components/qiun-data-charts/qiun-data-charts.vue?b9e2","webpack:///C:/Users/Administrator/WeChatProjects/gb_xi/components/qiun-data-charts/qiun-data-charts.vue?dc44","webpack:///C:/Users/Administrator/WeChatProjects/gb_xi/components/qiun-data-charts/qiun-data-charts.vue?8545","uni-app:///components/qiun-data-charts/qiun-data-charts.vue","webpack:///C:/Users/Administrator/WeChatProjects/gb_xi/components/qiun-data-charts/qiun-data-charts.vue?bcc5"],"names":["renderjs","component","options","__file","components","qiunLoading","qiunError","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","deepCloneAssign","formatterAssign","args","getFormatDate","date","lastMoveTime","default","undefined","textEnum","type","Array","groupEnum","pageScrollTop","Number","directory","String","data","cid","inWx","inAli","inTt","inBd","inH5","inApp","type2d","disScroll","pixel","cWidth","cHeight","showchart","echarts","echartsResize","uchartsOpts","echartsOpts","drawData","lastDrawTime","created","canvasId","id","t","charAt","Math","floor","random","len","canvas2d","uni","getSystemInfoSync","pixelRatio","log","disableScroll","mounted","$nextTick","onWindowResize","setTimeout","destroyed","cfe","option","instance","offWindowResize","watch","chartDataProps","handler","val","JSON","stringify","oldval","series","length","beforeInit","mixinDatacomLoading","mixinDatacomErrorMessage","immediate","deep","localdata","optsProps","checkData","eoptsProps","reshow","reload","reloading","emitMsg","errorMessage","errorShow","computed","parse","opts","eopts","chartData","methods","localdataInit","getCloudData","resdata","i","group","j","text","needCategories","categories","includes","tmpcategories","idate","edate","map","item","tempckey","push","tmpData","tempskey","tmpseries","name","seriesdata","k","collection","onMixinDatacomPropsChange","newData","xAxis","yAxis","seriesTemplate","Template","resizeHandler","duration","mixinDatacomGet","needReset","_clearChart","echrts","ctx","clearRect","draw","init","saveImage","_newChart","_tooltipDefault","category","value","properties","_showTooltip","tc","x","y","offset","index","textList","formatter","_tap","inScrollView","tooltipShow","changedTouches","unshift","detail","currentTarget","offsetLeft","offsetTop","currentIndex","legendIndex","_touchStart","_touchMove","currMoveTime","_touchEnd","_error","errMsg","$emit","msg","params","getRenderType","toJSON"],"mappings":"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","file":"components/qiun-data-charts/qiun-data-charts.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./qiun-data-charts.vue?vue&type=template&id=f10dbef8&scoped=true&filter-modules=eyJyZGNoYXJ0cyI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjM1NTM3LCJhdHRycyI6eyJtb2R1bGUiOiJyZGNoYXJ0cyIsImxhbmciOiJqcyJ9LCJlbmQiOjQ3NjA5fX0%3D&\"\nvar renderjs\nimport script from \"./qiun-data-charts.vue?vue&type=script&lang=js&\"\nexport * from \"./qiun-data-charts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./qiun-data-charts.vue?vue&type=style&index=0&id=f10dbef8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f10dbef8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/qiun-data-charts/qiun-data-charts.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./qiun-data-charts.vue?vue&type=template&id=f10dbef8&scoped=true&filter-modules=eyJyZGNoYXJ0cyI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjM1NTM3LCJhdHRycyI6eyJtb2R1bGUiOiJyZGNoYXJ0cyIsImxhbmciOiJqcyJ9LCJlbmQiOjQ3NjA5fX0%3D&\"","var components\ntry {\n  components = {\n    qiunLoading: function() {\n      return import(\n        /* webpackChunkName: \"components/qiun-loading/qiun-loading\" */ \"@/components/qiun-loading/qiun-loading.vue\"\n      )\n    },\n    qiunError: function() {\n      return import(\n        /* webpackChunkName: \"components/qiun-error/qiun-error\" */ \"@/components/qiun-error/qiun-error.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./qiun-data-charts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./qiun-data-charts.vue?vue&type=script&lang=js&\"","<!-- \r\n * qiun-data-charts 秋云高性能跨全端图表组件 v2.0.0-20210419\r\n * Copyright (c) 2021 QIUN® 秋云 https://www.ucharts.cn All rights reserved.\r\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n * 复制使用请保留本段注释，感谢支持开源！\r\n * 为方便更多开发者使用，如有更好的建议请提交码云 Pull Requests ！\r\n *\r\n * uCharts®官方网站\r\n * https://www.uCharts.cn\r\n * \r\n * 开源地址:\r\n * https://gitee.com/uCharts/uCharts\r\n * \r\n * uni-app插件市场地址：\r\n * http://ext.dcloud.net.cn/plugin?id=271\r\n * \r\n -->\r\n<template>\r\n  <view class=\"chartsview\" :id=\"'ChartBoxId'+cid\">\r\n    <view v-if=\"mixinDatacomLoading\">\r\n      <!-- 自定义加载状态，请改这里 -->\r\n      <qiun-loading :loadingType=\"loadingType\" />\r\n    </view>\r\n    <view v-if=\"mixinDatacomErrorMessage && errorShow\" @tap=\"reloading\">\r\n      <!-- 自定义错误提示，请改这里 -->\r\n      <qiun-error :errorMessage=\"errorMessage\" />\r\n    </view>\r\n    <!-- APP和H5采用renderjs渲染图表 -->\r\n    <!-- #ifdef APP-VUE || H5 -->\r\n    <block v-if=\"echarts\">\r\n      <view\r\n        :style=\"{ background: background }\"\r\n        style=\"width: 100%;height: 100%;\"\r\n        :data-directory=\"directory\"\r\n        :id=\"'EC'+cid\" \r\n        :prop=\"echartsOpts\" \r\n        :change:prop=\"rdcharts.ecinit\" \r\n        :resize=\"echartsResize\"\r\n        :change:resize=\"rdcharts.ecresize\"\r\n        v-show=\"showchart\"\r\n      />\r\n    </block>\r\n    <block v-else>\r\n      <view\r\n        @tap=\"rdcharts.tap\"\r\n        @mousemove=\"rdcharts.mouseMove\"\r\n        @mousedown=\"rdcharts.mouseDown\"\r\n        @mouseup=\"rdcharts.mouseUp\"\r\n        @touchstart=\"rdcharts.touchStart\"\r\n        @touchmove=\"rdcharts.touchMove\"\r\n        @touchend=\"rdcharts.touchEnd\"\r\n        :id=\"'UC'+cid\"\r\n        :prop=\"uchartsOpts\"\r\n        :change:prop=\"rdcharts.ucinit\"\r\n      >\r\n        <canvas\r\n          :id=\"cid\"\r\n          :canvasId=\"cid\"\r\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n          :disable-scroll=\"disableScroll\"\r\n          @error=\"_error\"\r\n          v-if=\"showchart\"\r\n        />\r\n      </view>\r\n    </block>\r\n    <!-- #endif -->\r\n    <!-- 支付宝小程序 -->\r\n    <!-- #ifdef MP-ALIPAY -->\r\n    <block v-if=\"ontouch\">\r\n      <canvas\r\n        :id=\"cid\"\r\n        :canvasId=\"cid\"\r\n        :width=\"cWidth * pixel\"\r\n        :height=\"cHeight * pixel\"\r\n        :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n        :disable-scroll=\"disScroll\"\r\n        @tap=\"_tap\"\r\n        @touchstart=\"_touchStart\"\r\n        @touchmove=\"_touchMove\"\r\n        @touchend=\"_touchEnd\"\r\n        @error=\"_error\"\r\n        v-if=\"showchart\"\r\n      />\r\n    </block>\r\n    <block v-if=\"!ontouch\">\r\n      <canvas\r\n        :id=\"cid\"\r\n        :canvasId=\"cid\"\r\n        :width=\"cWidth * pixel\"\r\n        :height=\"cHeight * pixel\"\r\n        :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n        :disable-scroll=\"disScroll\"\r\n        @tap=\"_tap\"\r\n        @error=\"_error\"\r\n        v-if=\"showchart\"\r\n      />\r\n    </block>\r\n    <!-- #endif -->\r\n    <!-- 其他小程序通过vue渲染图表 -->\r\n    <!-- #ifdef MP-360 || MP-BAIDU || MP-QQ || MP-TOUTIAO || MP-WEIXIN -->\r\n    <block v-if=\"type2d\">\r\n      <view v-if=\"ontouch\" @tap=\"_tap\">\r\n        <canvas\r\n          :id=\"cid\"\r\n          :canvasId=\"cid\"\r\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n          type=\"2d\"\r\n          :disable-scroll=\"disScroll\"\r\n          @touchstart=\"_touchStart\"\r\n          @touchmove=\"_touchMove\"\r\n          @touchend=\"_touchEnd\"\r\n          @error=\"_error\"\r\n          v-show=\"showchart\"\r\n        />\r\n      </view>\r\n      <view v-if=\"!ontouch\" @tap=\"_tap\">\r\n        <canvas\r\n          :id=\"cid\"\r\n          :canvasId=\"cid\"\r\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n          type=\"2d\"\r\n          :disable-scroll=\"disScroll\"\r\n          @error=\"_error\"\r\n          v-show=\"showchart\"\r\n        />\r\n      </view>\r\n    </block>\r\n    <block v-if=\"!type2d\">\r\n      <view v-if=\"ontouch\" @tap=\"_tap\">\r\n        <canvas\r\n          :id=\"cid\"\r\n          :canvasId=\"cid\"\r\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n          @touchstart=\"_touchStart\"\r\n          @touchmove=\"_touchMove\"\r\n          @touchend=\"_touchEnd\"\r\n          :disable-scroll=\"disScroll\"\r\n          @error=\"_error\"\r\n          v-if=\"showchart\"\r\n        />\r\n      </view>\r\n      <view v-if=\"!ontouch\" >\r\n        <canvas\r\n          :id=\"cid\"\r\n          :canvasId=\"cid\"\r\n          :style=\"{ width: cWidth + 'px', height: cHeight + 'px', background: background }\"\r\n          :disable-scroll=\"disScroll\"\r\n          @tap=\"_tap\"\r\n          @error=\"_error\"\r\n          v-if=\"showchart\"\r\n        />\r\n      </view>\r\n    </block>\r\n    <!-- #endif -->\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport uChartsMp from '@/components/u-charts/u-charts-v2.0.0.js';\r\nimport cfu from '@/components/u-charts/config-ucharts.js';\r\n// #ifdef APP-VUE || H5\r\nimport cfe from '@/components/u-charts/config-echarts.js';\r\n// #endif\r\n\r\nfunction deepCloneAssign(origin = {}, ...args) {\r\n  for (let i in args) {\r\n    for (let key in args[i]) {\r\n      if (args[i].hasOwnProperty(key)) {\r\n        origin[key] = args[i][key] && typeof args[i][key] === 'object' ? deepCloneAssign(Array.isArray(args[i][key]) ? [] : {}, origin[key], args[i][key]) : args[i][key];\r\n      }\r\n    }\r\n  }\r\n  return origin;\r\n}\r\n\r\nfunction formatterAssign(args,formatter) {\r\n  for (let key in args) {\r\n    if(typeof args[key] === 'object'){\r\n      formatterAssign(args[key],formatter)\r\n    }else if(key === 'format' && typeof args[key] === 'string'){\r\n      args['formatter'] = formatter[args[key]] ? formatter[args[key]] : undefined;\r\n    }\r\n  }\r\n  return args;\r\n}\r\n\r\n// 时间转换函数，为了匹配uniClinetDB读取出的时间与categories不同\nfunction getFormatDate(date) {\n\tvar seperator = \"-\";\n\tvar year = date.getFullYear();\n\tvar month = date.getMonth() + 1;\n\tvar strDate = date.getDate();\n\tif (month >= 1 && month <= 9) {\n\t\t\tmonth = \"0\" + month;\n\t}\n\tif (strDate >= 0 && strDate <= 9) {\n\t\t\tstrDate = \"0\" + strDate;\n\t}\n\tvar currentdate = year + seperator + month + seperator + strDate;\n\treturn currentdate;\n}\r\n\r\nvar lastMoveTime = null;\r\n\r\nexport default {\r\n  name: 'qiun-data-charts',\r\n  mixins: [uniCloud.mixinDatacom],\r\n  props: {\r\n    type: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    canvasId: {\r\n      type: String,\r\n      default: 'uchartsid'\r\n    },\r\n    canvas2d: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    background: {\r\n      type: String,\r\n      default: 'none'\r\n    },\r\n    animation: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    chartData: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          categories: [],\r\n          series: []\r\n        };\r\n      }\r\n    },\r\n    opts: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    eopts: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      }\r\n    },\r\n    loadingType: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    errorShow: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    errorMessage: {\r\n      type: String,\r\n      default: null\r\n    },\r\n    inScrollView: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    reshow: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    reload: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    disableScroll: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    ontap: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    ontouch: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    onmouse: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    onmovetip: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    echartsH5: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    echartsApp: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    tooltipShow: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    tooltipFormat: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    tooltipCustom: {\r\n      default: undefined\r\n    },\r\n    startDate: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    endDate: {\r\n      type: String,\r\n      default: undefined\r\n    },\r\n    textEnum: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    groupEnum: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    pageScrollTop: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    directory: {\r\n      type: String,\r\n      default: '/'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      cid: 'uchartsid',\r\n      inWx: false,\r\n      inAli: false,\r\n      inTt:false,\r\n      inBd:false,\r\n      inH5: false,\r\n      inApp: false,\r\n      type2d: true,\r\n      disScroll: false,\r\n      pixel: 1,\r\n      cWidth: 375,\r\n      cHeight: 250,\r\n      showchart: false,\r\n      echarts: false,\r\n      echartsResize:false,\r\n      uchartsOpts: {},\r\n      echartsOpts: {},\r\n      drawData:{},\r\n      lastDrawTime:null,\r\n    };\r\n  },\r\n  created(){\r\n    this.cid = this.canvasId\r\n    if (this.canvasId == 'uchartsid' || this.canvasId == '') {\r\n      let t = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n      let len = t.length\r\n      let id = ''\r\n      for (let i = 0; i < 32; i++) {\r\n        id += t.charAt(Math.floor(Math.random() * len))\r\n      }\r\n      this.cid = id\r\n    }\r\n    // #ifdef MP-WEIXIN || MP-QQ\r\n    this.inWx = true;\r\n    if (this.canvas2d === false) {\r\n      this.type2d = false;\r\n    }else{\r\n      this.pixel = uni.getSystemInfoSync().pixelRatio;\r\n      if (this.canvasId === 'uchartsid' || this.canvasId == '') {\r\n        console.log('[uCharts]:开启canvas2d模式，必须指定canvasId，否则会出现偶尔获取不到dom节点的问题！');\r\n      }\r\n    }\r\n    // #endif\r\n    //非微信小程序端强制关闭canvas2d模式\r\n    // #ifndef MP-WEIXIN || MP-QQ\r\n    this.type2d = false;\r\n    // #endif\r\n    // #ifdef MP-ALIPAY\r\n    this.inAli = true;\r\n    this.pixel = uni.getSystemInfoSync().pixelRatio;\r\n    // #endif\r\n    // #ifdef MP-BAIDU\r\n    this.inBd = true;\r\n    // #endif\r\n    // #ifdef MP-TOUTIAO\r\n    this.inTt = true;\r\n    // #endif\r\n    this.disScroll = this.disableScroll;\r\n  },\r\n  mounted() {\r\n    // #ifdef APP-VUE\r\n    this.inApp = true;\r\n    if (this.echartsApp === true) {\r\n      this.echarts = true;\r\n    }\r\n    // #endif\r\n    // #ifdef APP-NVUE\r\n    this.inApp = true;\r\n    this.mixinDatacomLoading = false\r\n    this.mixinDatacomErrorMessage = \"暂不支持NVUE\"\r\n    // #endif\r\n    // #ifdef H5\r\n    this.inH5 = true;\r\n    if (this.echartsH5 === true) {\r\n      this.echarts = true;\r\n    }\r\n    // #endif\r\n    this.$nextTick(()=>{\r\n      this.beforeInit();\r\n    })\r\n    // #ifndef MP-ALIPAY || MP-BAIDU || MP-TOUTIAO\r\n    uni.onWindowResize(res => {\r\n      if (this.mixinDatacomLoading == true) {\r\n        return;\r\n      }\r\n      let errmsg = this.mixinDatacomErrorMessage\r\n      if(errmsg !== null && errmsg !== 'null' && errmsg !== ''){\r\n        return;\r\n      }\r\n      setTimeout(() => {\r\n        if(this.echarts){\r\n          this.echartsResize = !this.echartsResize\r\n        }else{\r\n          this.resizeHandler()\r\n        }\r\n      }, 200);\r\n    });\r\n    // #endif\r\n  },\r\n  destroyed(){\r\n    if(this.echarts === true){\r\n      delete cfe.option[this.cid]\r\n      delete cfe.instance[this.cid]\r\n    }else{\r\n      delete cfu.option[this.cid]\r\n      delete cfu.instance[this.cid]\r\n    }\r\n    // #ifndef MP-ALIPAY || MP-BAIDU || MP-TOUTIAO\r\n    uni.offWindowResize(()=>{})\r\n    // #endif\r\n  },\r\n  watch: {\r\n    chartDataProps: {\r\n      handler(val, oldval) {\r\n        if (typeof val === 'object') {\r\n          if (JSON.stringify(val) !== JSON.stringify(oldval)) {\r\n            if (val.series && val.series.length > 0) {\r\n              this.beforeInit();\r\n            }else{\r\n              this.mixinDatacomLoading = true;\r\n              this.showchart = false;\r\n              this.mixinDatacomErrorMessage = null;\r\n            }\r\n          }\r\n        } else {\r\n          this.mixinDatacomLoading = false;\r\n          this.showchart = false;\r\n          this.mixinDatacomErrorMessage = '参数错误：chartData数据类型错误';\r\n        }\r\n      },\r\n      immediate: false,\r\n      deep: true\r\n    },\r\n    localdata:{\r\n      handler(val, oldval) {\r\n        if (JSON.stringify(val) !== JSON.stringify(oldval)) {\r\n          if (val.length > 0) {\r\n            this.beforeInit();\r\n          }else{\r\n            this.mixinDatacomLoading = true;\r\n            this.showchart = false;\r\n            this.mixinDatacomErrorMessage = null;\r\n          }\r\n        }\r\n      },\r\n      immediate: false,\r\n      deep: true\r\n    },\r\n    optsProps: {\r\n      handler(val, oldval) {\r\n        if (typeof val === 'object') {\r\n          if (JSON.stringify(val) !== JSON.stringify(oldval) && this.echarts === false) {\r\n            this.checkData(this.drawData);\r\n          }\r\n        } else {\r\n          this.mixinDatacomLoading = false;\r\n          this.showchart = false;\r\n          this.mixinDatacomErrorMessage = '参数错误：opts数据类型错误';\r\n        }\r\n      },\r\n      immediate: false,\r\n      deep: true\r\n    },\r\n    eoptsProps: {\r\n      handler(val, oldval) {\r\n        if (typeof val === 'object') {\r\n          if (JSON.stringify(val) !== JSON.stringify(oldval) && this.echarts === true) {\r\n            this.checkData(this.drawData);\r\n          }\r\n        } else {\r\n          this.mixinDatacomLoading = false;\r\n          this.showchart = false;\r\n          this.mixinDatacomErrorMessage = '参数错误：eopts数据类型错误';\r\n        }\r\n      },\r\n      immediate: false,\r\n      deep: true\r\n    },\r\n    reshow(val, oldval) {\r\n      if (val === true && this.mixinDatacomLoading === false) {\r\n        setTimeout(() => {\r\n          this.showchart = true;\r\n          this.mixinDatacomErrorMessage = null;\r\n          this.echartsResize = !this.echartsResize;\r\n          this.checkData(this.drawData);\r\n        }, 200);\r\n      }\r\n    },\r\n    reload(val, oldval) {\r\n      if (val === true) {\r\n        this.showchart = false;\r\n        this.mixinDatacomErrorMessage = null;\r\n        this.reloading();\r\n      }\r\n    },\r\n    mixinDatacomErrorMessage(val, oldval) {\r\n      if (val) {\r\n        this.emitMsg({name: 'error', params: {type:\"error\", errorShow: this.errorShow, msg: val, id: this.cid}});\r\n        if(this.errorShow){\r\n          console.log('[秋云图表组件]' + val);\r\n        }\r\n      }\r\n    },\r\n    errorMessage(val, oldval) {\r\n      if (val && this.errorShow && val !== null && val !== 'null' && val !== '') {\r\n        this.showchart = false;\r\n        this.mixinDatacomLoading = false;\r\n        this.mixinDatacomErrorMessage = val;\r\n      } else {\r\n        this.showchart = false;\r\n        this.mixinDatacomErrorMessage = null;\r\n        this.reloading();\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    optsProps() {\r\n      return JSON.parse(JSON.stringify(this.opts));\r\n    },\r\n    eoptsProps() {\r\n      return JSON.parse(JSON.stringify(this.eopts));\r\n    },\r\n    chartDataProps() {\r\n      return JSON.parse(JSON.stringify(this.chartData));\r\n    },\r\n  },\r\n  methods: {\r\n    beforeInit(){\r\n      this.mixinDatacomErrorMessage = null;\r\n      if (typeof this.chartData === 'object' && this.chartData != null && this.chartData.series !== undefined && this.chartData.series.length > 0) {\r\n        this.mixinDatacomLoading = true;\r\n        //拷贝一下chartData，为了opts变更后统一数据来源\r\n        this.drawData = deepCloneAssign({}, this.chartData);\r\n        this.checkData(this.chartData);\r\n      }else if(this.localdata.length>0){\r\n        this.mixinDatacomLoading = true;\r\n        this.localdataInit(this.localdata);\r\n      }else if(this.collection !== ''){\r\n        this.mixinDatacomLoading = false;\r\n        this.getCloudData();\r\n      }else{\r\n        this.mixinDatacomLoading = true;\r\n      }\r\n    },\r\n    localdataInit(resdata){\r\n      //替换enum类型为正确的描述\r\n      if(this.groupEnum.length>0){\r\n        for (let i = 0; i < resdata.length; i++) {\r\n          for (let j = 0; j < this.groupEnum.length; j++) {\r\n            if(resdata[i].group === this.groupEnum[j].value){\r\n              resdata[i].group = this.groupEnum[j].text\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if(this.textEnum.length>0){\r\n        for (let i = 0; i < resdata.length; i++) {\r\n          for (let j = 0; j < this.textEnum.length; j++) {\r\n            if(resdata[i].text === this.textEnum[j].value){\r\n              resdata[i].text = this.textEnum[j].text\r\n            }\r\n          }\r\n        }\r\n      }\r\n      let needCategories = false;\r\n      let tmpData = {categories:[], series:[]}\r\n      let tmpcategories = []\r\n      let tmpseries = [];\r\n      //拼接categories\r\n      if(this.echarts === true){\r\n        needCategories = cfe.categories.includes(this.type)\r\n      }else{\r\n        needCategories = cfu.categories.includes(this.type)\r\n      }\r\n      if(needCategories === true){\r\n        //如果props中的chartData带有categories，则优先使用chartData的categories\r\n        if(this.chartData && this.chartData.categories && this.chartData.categories.length>0){\r\n          tmpcategories = this.chartData.categories\r\n        }else{\r\n          //如果是日期类型的数据，不管是本地数据还是云数据，都按起止日期自动拼接categories\r\n          if(this.startDate && this.endDate){\r\n            let idate = new Date(this.startDate)\r\n            let edate = new Date(this.endDate)\r\n            while (idate <= edate) {\r\n            \ttmpcategories.push(getFormatDate(idate))\r\n            \tidate = idate.setDate(idate.getDate() + 1)\r\n            \tidate = new Date(idate)\r\n            }\r\n          //否则从结果中去重并拼接categories\r\n          }else{\r\n            let tempckey = {};\r\n            resdata.map(function(item, index) {\r\n              if (item.text != undefined && !tempckey[item.text]) {\r\n                tmpcategories.push(item.text)\r\n                tempckey[item.text] = true\r\n              }\r\n            });\r\n          }\r\n        }\r\n        tmpData.categories = tmpcategories\r\n      }\r\n      //拼接series\r\n      let tempskey = {};\r\n      resdata.map(function(item, index) {\r\n        if (item.group != undefined && !tempskey[item.group]) {\r\n          tmpseries.push({ name: item.group, data: [] });\r\n          tempskey[item.group] = true;\r\n        }\r\n      });\r\n      //如果没有获取到分组名称(可能是带categories的数据，也可能是不带的饼图类)\r\n      if (tmpseries.length == 0) {\r\n        tmpseries = [{ name: '默认分组', data: [] }];\r\n        //如果是需要categories的图表类型\r\n        if(needCategories === true){\r\n          for (let j = 0; j < tmpcategories.length; j++) {\r\n            let seriesdata = 0;\r\n            for (let i = 0; i < resdata.length; i++) {\r\n              if (resdata[i].text == tmpcategories[j]) {\r\n                seriesdata = resdata[i].value;\r\n              }\r\n            }\r\n            tmpseries[0].data.push(seriesdata);\r\n          }\r\n        //如果是饼图类的图表类型\r\n        }else{\r\n          for (let i = 0; i < resdata.length; i++) {\r\n            tmpseries[0].data.push({\"name\": resdata[i].text,\"value\": resdata[i].value});\r\n          }\r\n        }\r\n      //如果有分组名\r\n      } else {\r\n        for (let k = 0; k < tmpseries.length; k++) {\r\n          //如果有categories\r\n          if (tmpcategories.length > 0) {\r\n            for (let j = 0; j < tmpcategories.length; j++) {\r\n              let seriesdata = 0;\r\n              for (let i = 0; i < resdata.length; i++) {\r\n                if (tmpseries[k].name == resdata[i].group && resdata[i].text == tmpcategories[j]) {\r\n                  seriesdata = resdata[i].value;\r\n                }\r\n              }\r\n              tmpseries[k].data.push(seriesdata);\r\n            }\r\n          //如果传了group而没有传text，即没有categories（正常情况下这种数据是不符合数据要求规范的）\r\n          } else {\r\n            for (let i = 0; i < resdata.length; i++) {\r\n              if (tmpseries[k].name == resdata[i].group) {\r\n                tmpseries[k].data.push(resdata[i].value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      tmpData.series = tmpseries\r\n      //拷贝一下chartData，为了opts变更后统一数据来源\r\n      this.drawData = deepCloneAssign({}, tmpData);\r\n      this.checkData(tmpData)\r\n    },\r\n    reloading() {\r\n      this.showchart = false;\r\n      this.mixinDatacomErrorMessage = null;\r\n      if (this.collection !== '') {\r\n        this.mixinDatacomLoading = false;\r\n        this.onMixinDatacomPropsChange(true);\r\n      } else {\r\n        this.beforeInit();\r\n      }\r\n    },\r\n    checkData(anyData) {\r\n      let cid = this.cid\r\n      //复位opts或eopts\r\n      if(this.echarts === true){\r\n        if (this.type && cfe.type.includes(this.type)) {\r\n          cfe.option[cid] = deepCloneAssign({}, cfe[this.type], this.eopts);\r\n        }else{\r\n          cfe.option[cid] = deepCloneAssign({}, this.eopts);\r\n        }\r\n        cfe.option[cid].id = cid;\r\n      }else{\r\n        if (this.type && cfu.type.includes(this.type)) {\r\n          cfu.option[cid] = deepCloneAssign({}, cfu[this.type], this.opts);\r\n          cfu.option[cid].canvasId = cid;\r\n        } else {\r\n          this.mixinDatacomLoading = false;\r\n          this.showchart = false;\r\n          this.mixinDatacomErrorMessage = '参数错误：props参数中type类型不正确';\r\n        }\r\n      }\r\n      //挂载categories和series\r\n      let newData = deepCloneAssign({}, anyData);\r\n      if (newData.series !== undefined && newData.series.length > 0) {\r\n        this.mixinDatacomErrorMessage = null;\r\n        if (this.echarts === true) {\r\n          if(cfe.option[cid].xAxis && cfe.option[cid].xAxis.type && cfe.option[cid].xAxis.type === 'category'){\r\n            cfe.option[cid].xAxis.data = newData.categories\r\n          }\r\n          if(cfe.option[cid].yAxis && cfe.option[cid].yAxis.type && cfe.option[cid].yAxis.type === 'category'){\r\n            cfe.option[cid].yAxis.data = newData.categories\r\n          }\r\n          cfe.option[cid].series = []\r\n          for (var i = 0; i < newData.series.length; i++) {\r\n            cfe.option[cid].seriesTemplate = cfe.option[cid].seriesTemplate ? cfe.option[cid].seriesTemplate : {}\r\n            let Template = deepCloneAssign({},cfe.option[cid].seriesTemplate,newData.series[i])\r\n            cfe.option[cid].series.push(Template)\r\n          }\r\n          this.$nextTick(()=>{\r\n            this.init()\r\n          })\r\n        }else{\r\n          cfu.option[cid].categories = newData.categories;\r\n          cfu.option[cid].series = newData.series;\r\n          this.$nextTick(()=>{\r\n            this.init()\r\n          })\r\n        }\r\n      }\r\n    },\r\n    resizeHandler() {\r\n      //渲染防抖\r\n      let currTime = Date.now();\r\n      let lastDrawTime = this.lastDrawTime?this.lastDrawTime:currTime-3000;\r\n      let duration = currTime - lastDrawTime;\r\n      if (duration < 1000) return;\r\n      let chartdom = uni\r\n        .createSelectorQuery()\r\n        // #ifndef MP-ALIPAY\r\n        .in(this)\r\n        // #endif\r\n        .select('#ChartBoxId'+this.cid)\r\n        .boundingClientRect(data => {\r\n          this.showchart = true;\r\n          if (data.width > 0 && data.height > 0) {\r\n            if (data.width !== this.cWidth || data.height !== this.cHeight) {\r\n              this.checkData(this.drawData)\r\n            }\r\n          }\r\n        })\r\n        .exec();\r\n    },\r\n    getCloudData() {\r\n      if (this.mixinDatacomLoading == true) {\r\n        return;\r\n      }\r\n      this.mixinDatacomLoading = true;\r\n      this.mixinDatacomGet()\r\n        .then(res => {\r\n          this.mixinDatacomResData = res.result.data;\r\n          this.localdataInit(this.mixinDatacomResData);\r\n        })\r\n        .catch(err => {\r\n          this.mixinDatacomLoading = false;\r\n          this.showchart = false;\r\n          this.mixinDatacomErrorMessage = '请求错误：' + err;\r\n        });\r\n    },\r\n    onMixinDatacomPropsChange(needReset, changed) {\r\n      if (needReset == true && this.collection !== '') {\r\n        this.showchart = false;\r\n        this.mixinDatacomErrorMessage = null;\r\n        this._clearChart();\r\n        this.getCloudData();\r\n      }\r\n    },\r\n    _clearChart() {\r\n      let cid = this.cid\r\n      if (this.echrts !== true) {\r\n        const ctx = uni.createCanvasContext(cid, this);\r\n        ctx.clearRect(0, 0, this.cWidth, this.cHeight);\r\n        ctx.draw();\r\n      }\r\n    },\r\n    init() {\r\n      let cid = this.cid\r\n      let chartdom = uni\r\n        .createSelectorQuery()\r\n        // #ifndef MP-ALIPAY\r\n        .in(this)\r\n        // #endif\r\n        .select('#ChartBoxId'+cid)\r\n        .boundingClientRect(data => {\r\n          if (data.width > 0 && data.height > 0) {\r\n            this.lastDrawTime = Date.now();\r\n            this.cWidth = data.width;\r\n            this.cHeight = data.height;\r\n            if(this.echarts !== true){\r\n              cfu.option[cid].background = this.background == 'none' ? '#FFFFFF' : this.background;\r\n              cfu.option[cid].canvas2d = this.type2d;\r\n              cfu.option[cid].pixelRatio = this.pixel;\r\n              cfu.option[cid].animation = this.animation;\r\n              cfu.option[cid].width = data.width * this.pixel;\r\n              cfu.option[cid].height = data.height * this.pixel;\r\n              cfu.option[cid].ontap = this.ontap;\r\n              cfu.option[cid].ontouch = this.ontouch;\r\n              cfu.option[cid].onmouse = this.onmouse;\r\n              cfu.option[cid].onmovetip = this.onmovetip;\r\n              cfu.option[cid].tooltipShow = this.tooltipShow;\r\n              cfu.option[cid].tooltipFormat = this.tooltipFormat;\r\n              cfu.option[cid].tooltipCustom = this.tooltipCustom;\r\n              cfu.option[cid].inScrollView = this.inScrollView;\r\n              cfu.option[cid].lastDrawTime = this.lastDrawTime;\r\n            }\r\n            //如果是H5或者App端，采用renderjs渲染图表\r\n            if (this.inH5 || this.inApp) {\r\n              if (this.echarts == true) {\r\n                this.mixinDatacomLoading = false;\r\n                this.showchart = true;\r\n                cfe.option[cid].ontap = this.ontap;\r\n                cfe.option[cid].onmouse = this.onmouse;\r\n                cfe.option[cid].tooltipShow = this.tooltipShow;\r\n                cfe.option[cid].tooltipFormat = this.tooltipFormat;\r\n                cfe.option[cid].tooltipCustom = this.tooltipCustom;\r\n                cfe.option[cid].lastDrawTime = this.lastDrawTime;\r\n                cfe.option[cid].rotateLock = cfe.option[cid].rotate;\r\n                this.echartsOpts = deepCloneAssign({}, cfe.option[cid]);\r\n              } else {\r\n                cfu.option[cid].rotateLock = cfu.option[cid].rotate;\r\n                this.mixinDatacomLoading = false;\r\n                this.showchart = true;\r\n                this.uchartsOpts = deepCloneAssign({}, cfu.option[cid]);\r\n              }\r\n            //如果是小程序端，采用uCharts渲染\r\n            } else {\r\n              cfu.option[cid] = formatterAssign(cfu.option[cid],cfu.formatter)\r\n              this.mixinDatacomErrorMessage = null;\r\n              this.mixinDatacomLoading = false;\r\n              this.showchart = true;\r\n              this.$nextTick(()=>{\r\n                if (this.type2d === true) {\r\n                  const query = uni.createSelectorQuery().in(this)\r\n                  query\r\n                    .select('#' + cid)\r\n                    .fields({ node: true, size: true })\r\n                    .exec(res => {\r\n                      if (res[0]) {\r\n                        const canvas = res[0].node;\r\n                        const ctx = canvas.getContext('2d');\r\n                        cfu.option[cid].context = ctx;\r\n                        canvas.width = data.width * this.pixel;\r\n                        canvas.height = data.height * this.pixel;\r\n                        canvas._width = data.width * this.pixel;\r\n                        canvas._height = data.height * this.pixel;\r\n                        cfu.option[cid].rotateLock = cfu.option[cid].rotate;\r\n                        this._newChart(cid);\r\n                      } else {\r\n                        this.showchart = false;\r\n                        this.mixinDatacomErrorMessage = '参数错误：开启2d模式后，未获取到dom节点，canvas-id:' + cid;\r\n                      }\r\n                    });\r\n                } else {\r\n                  if(this.inAli){\r\n                    cfu.option[cid].rotateLock = cfu.option[cid].rotate;\r\n                  }\r\n                  cfu.option[cid].context = uni.createCanvasContext(cid, this);\r\n                  this._newChart(cid);\r\n                }\r\n              })\r\n            }\r\n          } else {\r\n            this.mixinDatacomLoading = false;\r\n            this.showchart = false;\r\n            if (this.reshow == true) {\r\n              this.mixinDatacomErrorMessage = '布局错误：未获取到父元素宽高尺寸！canvas-id:' + cid;\r\n            }\r\n          }\r\n        })\r\n        .exec();\r\n    },\r\n    saveImage(){\r\n    \tuni.canvasToTempFilePath({\r\n    \t  canvasId: this.cid,\r\n    \t  success: res=>{\r\n    \t    //#ifdef H5\r\n    \t\t\tvar a = document.createElement(\"a\");\r\n    \t\t\ta.href = res.tempFilePath;\r\n    \t\t\ta.download = this.cid;\r\n    \t\t\ta.target = '_blank'\r\n    \t\t\ta.click();\r\n    \t    //#endif\r\n    \t    //#ifndef H5\r\n    \t      uni.saveImageToPhotosAlbum({\r\n    \t          filePath: res.tempFilePath,\r\n    \t          success: function () {\r\n    \t              uni.showToast({\r\n    \t                  title: '保存成功',\r\n    \t                  duration: 2000\r\n    \t              });\r\n    \t          }\r\n    \t      });\r\n    \t    //#endif\r\n    \t  } \r\n    \t},this);\r\n    },\r\n    // #ifndef APP-VUE || H5\r\n    _newChart(cid) {\r\n      if (this.mixinDatacomLoading == true) {\r\n        return;\r\n      }\r\n      this.showchart = true;\r\n      cfu.instance[cid] = new uChartsMp(cfu.option[cid]);\r\n      cfu.instance[cid].addEventListener('renderComplete', () => {\r\n        this.emitMsg({name: 'complete', params: {type:\"complete\", complete: true, id: cid}});\r\n        cfu.instance[cid].delEventListener('renderComplete')\r\n      });\r\n      cfu.instance[cid].addEventListener('scrollLeft', () => {\r\n        this.emitMsg({name: 'scrollLeft', params: {type:\"scrollLeft\", scrollLeft: true, id: cid}});\r\n      });\r\n      cfu.instance[cid].addEventListener('scrollRight', () => {\r\n        this.emitMsg({name: 'scrollRight', params: {type:\"scrollRight\", scrollRight: true, id: cid}});\r\n      });\r\n    },\r\n    _tooltipDefault(item, category, index, opts) {\r\n      if (category) {\r\n        let data = item.data\r\n        if(typeof item.data === \"object\"){\r\n          data = item.data.value\r\n        }\r\n        return category + ' ' + item.name + ':' + data;\r\n      } else {\r\n        if (item.properties !== undefined) {\r\n          return item.properties.name;\r\n        } else {\r\n          return item.name + ':' + item.data;\r\n        }\r\n      }\r\n    },\r\n    _showTooltip(e) {\r\n      let cid = this.cid\r\n      let tc = cfu.option[cid].tooltipCustom\r\n      if (tc && tc !== undefined && tc !== null) {\r\n        let offset = undefined;\r\n        if (tc.x >= 0 && tc.y >= 0) {\r\n          offset = { x: tc.x, y: tc.y + 10 };\r\n        }\r\n        cfu.instance[cid].showToolTip(e, {\r\n          index: tc.index,\r\n          offset: offset,\r\n          textList: tc.textList,\r\n          formatter: (item, category, index, opts) => {\r\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\r\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\r\n            } else {\r\n              return this._tooltipDefault(item, category, index, opts);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        cfu.instance[cid].showToolTip(e, {\r\n          formatter: (item, category, index, opts) => {\r\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\r\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\r\n            } else {\r\n              return this._tooltipDefault(item, category, index, opts);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n    _tap(e,move) {\r\n      let cid = this.cid\r\n      let currentIndex = null;\r\n      let legendIndex = null;\r\n      if (this.inScrollView === true || this.inAli) {\r\n        let chartdom = uni\r\n          .createSelectorQuery()\r\n          // #ifndef MP-ALIPAY\r\n          .in(this)\r\n          .select('#ChartBoxId'+cid)\r\n          // #endif\r\n          // #ifdef MP-ALIPAY\r\n          .select('#'+this.cid)\r\n          // #endif\r\n          .boundingClientRect(data => {\r\n            e.changedTouches=[];\r\n            if (this.inAli) {\r\n              e.changedTouches.unshift({ x: e.detail.pageX - data.left, y: e.detail.pageY - data.top});\r\n            }else{\r\n              e.changedTouches.unshift({ x: e.detail.x - data.left, y: e.detail.y - data.top - this.pageScrollTop});\r\n            }\r\n            if(move){\r\n              if (this.tooltipShow === true) {\r\n                this._showTooltip(e);\r\n              }\r\n            }else{\r\n              currentIndex = cfu.instance[cid].getCurrentDataIndex(e);\r\n              legendIndex = cfu.instance[cid].getLegendDataIndex(e);\r\n              cfu.instance[cid].touchLegend(e);\r\n              if (this.tooltipShow === true) {\r\n                this._showTooltip(e);\r\n              }\r\n              this.emitMsg({name: 'getIndex', params: { type:\"getIndex\", event:{ x: e.detail.x - data.left, y: e.detail.y - data.top }, currentIndex: currentIndex, legendIndex: legendIndex, id: cid}});\r\n            }\r\n          })\r\n          .exec();\r\n      } else {\r\n        if(move){\r\n          if (this.tooltipShow === true) {\r\n            this._showTooltip(e);\r\n          }\r\n        }else{\r\n          e.changedTouches=[];\r\n          e.changedTouches.unshift({ x: e.detail.x - e.currentTarget.offsetLeft, y: e.detail.y - e.currentTarget.offsetTop });\r\n          currentIndex = cfu.instance[cid].getCurrentDataIndex(e);\r\n          legendIndex = cfu.instance[cid].getLegendDataIndex(e);\r\n          cfu.instance[cid].touchLegend(e);\r\n          if (this.tooltipShow === true) {\r\n            this._showTooltip(e);\r\n          }\r\n          this.emitMsg({name: 'getIndex', params: {type:\"getIndex\", event:{ x: e.detail.x, y: e.detail.y - e.currentTarget.offsetTop }, currentIndex: currentIndex, legendIndex: legendIndex, id: cid}});\r\n        }\r\n      }\r\n    },\r\n    _touchStart(e) {\r\n      let cid = this.cid\r\n      lastMoveTime=Date.now();\r\n      if(cfu.option[cid].enableScroll === true){\r\n        cfu.instance[cid].scrollStart(e);\r\n      }\r\n      this.emitMsg({name:'getTouchStart', params:{type:\"touchStart\", event:e.changedTouches[0], id:cid}});\r\n    },\r\n    _touchMove(e) {\r\n      let cid = this.cid\r\n      let currMoveTime = Date.now();\r\n      let duration = currMoveTime - lastMoveTime;\r\n      if (duration < Math.floor(1000 / 60)) return;//每秒60帧\r\n      lastMoveTime = currMoveTime;\r\n      if(cfu.option[cid].enableScroll === true){\r\n        cfu.instance[cid].scroll(e);\r\n      }\r\n      this.emitMsg({name: 'getTouchMove', params: {type:\"touchMove\", event:e.changedTouches[0], id: cid}});\r\n      if(this.ontap === true && cfu.option[cid].enableScroll === false && this.onmovetip === true){\r\n        this._tap(e,true)\r\n      }\r\n    },\r\n    _touchEnd(e) {\r\n      let cid = this.cid\r\n      if(cfu.option[cid].enableScroll === true){\r\n        cfu.instance[cid].scrollEnd(e);\r\n      }\r\n      this.emitMsg({name:'getTouchEnd', params:{type:\"touchEnd\", event:e.changedTouches[0], id:cid}});\r\n      if(this.ontap === true && cfu.option[cid].enableScroll === false && this.onmovetip === true){\r\n        this._tap(e,true)\r\n      }\r\n    },\r\n    // #endif\r\n    _error(e) {\r\n      this.mixinDatacomErrorMessage = e.detail.errMsg;\r\n    },\r\n    emitMsg(msg) {\r\n      this.$emit(msg.name, msg.params);\r\n    },\r\n    getRenderType() {\r\n      //防止如果开启echarts且父元素为v-if的情况renderjs监听不到prop变化的问题\r\n      if(this.echarts===true && this.mixinDatacomLoading===false){\r\n        this.beforeInit()\r\n      }\r\n    },\r\n    toJSON(){\r\n      return this\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<!-- #ifdef APP-VUE || H5 -->\r\n<script module=\"rdcharts\" lang=\"renderjs\">\r\nimport uChartsRD from '@/components/u-charts/u-charts-v2.0.0.js';\r\nimport cfu from '@/components/u-charts/config-ucharts.js';\r\nimport cfe from '@/components/u-charts/config-echarts.js';\r\n\r\nvar that = {};\r\nvar rootdom = null;\r\n\r\nfunction rdformatterAssign(args,formatter) {\r\n  for (let key in args) {\r\n    if(typeof args[key] === 'object'){\r\n      rdformatterAssign(args[key],formatter)\r\n    }else if(key === 'format' && typeof args[key] === 'string'){\r\n      args['formatter'] = formatter[args[key]] ? formatter[args[key]] : undefined;\r\n    }\r\n  }\r\n  return args;\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      rid:null\r\n    }\r\n  },\r\n  mounted() {\r\n    rootdom = {top:0,left:0}\r\n    // #ifdef H5\r\n    let dm = document.querySelectorAll('uni-main')[0]\r\n    if(dm === undefined){\r\n      dm = document.querySelectorAll('uni-page-wrapper')[0]\r\n    }\r\n    rootdom = {top:dm.offsetTop,left:dm.offsetLeft}\r\n    // #endif\r\n    setTimeout(()=>{\r\n      if(this.rid === null){\r\n        this.$ownerInstance.callMethod('getRenderType')\r\n      }\r\n    },200)\r\n  },\r\n  destroyed(){\r\n    delete cfu.option[this.rid]\r\n    delete cfu.instance[this.rid]\r\n    delete cfe.option[this.rid]\r\n    delete cfe.instance[this.rid]\r\n  },\r\n  methods: {\r\n    //==============以下是ECharts的方法====================\r\n    ecinit(newVal, oldVal, owner, instance){\r\n      let cid = JSON.parse(JSON.stringify(newVal.id))\r\n      this.rid = cid\r\n      that[cid] = this.$ownerInstance\r\n      cfe.option[cid] = JSON.parse(JSON.stringify(newVal))\r\n      if (typeof window.echarts === 'object') {\r\n          this.newEChart()\r\n      }else{\r\n        const script = document.createElement('script')\r\n        // #ifdef APP-VUE\r\n        script.src = './static/app-plus/echarts.min.js'\r\n        // #endif\r\n        // #ifdef H5\r\n        const rooturl = window.location.origin \r\n        const directory = instance.getDataset().directory\r\n        script.src = rooturl + directory + 'static/h5/echarts.min.js'\r\n        // #endif\r\n        script.onload = this.newEChart\r\n        document.head.appendChild(script)\r\n      }\r\n    },\r\n    ecresize(newVal, oldVal, owner, instance){\r\n      if(cfe.instance[this.rid]){\r\n        cfe.instance[this.rid].resize()\r\n      }\r\n    },\r\n    newEChart(){\r\n      let cid = this.rid\r\n      if(cfe.instance[cid] === undefined){\r\n        cfe.instance[cid] = echarts.init(that[cid].$el.children[0])\r\n        //ontap开启后才触发click事件\r\n        if(cfe.option[cid].ontap === true){\r\n          cfe.instance[cid].on('click', resdata => {\r\n            let event = JSON.parse(JSON.stringify({\r\n              x:resdata.event.offsetX,y:resdata.event.offsetY\r\n            }))\r\n            that[cid].callMethod('emitMsg',{name:\"getIndex\", params:{type:\"getIndex\", event:event, currentIndex:resdata.dataIndex, value:resdata.data, seriesName: resdata.seriesName,id:cid}})\r\n          })\r\n        }\r\n        this.updataEChart(cid,cfe.option[cid])\r\n      }else{\r\n        this.updataEChart(cid,cfe.option[cid])\r\n      }\r\n    },\r\n    updataEChart(cid,option){\r\n      //替换option内format属性为formatter的预定义方法\r\n      option = rdformatterAssign(option,cfe.formatter)\r\n      if(option.tooltip){\r\n        option.tooltip.show = option.tooltipShow?true:false;\r\n        option.tooltip.position = this.tooltipPosition()\r\n        //tooltipFormat方法，替换组件的tooltipFormat为config-echarts.js内对应的方法\r\n        if (typeof option.tooltipFormat === 'string' && cfe.formatter[option.tooltipFormat]) {\r\n          option.tooltip.formatter = option.tooltip.formatter ? option.tooltip.formatter : cfe.formatter[option.tooltipFormat]\r\n        }\r\n      }\r\n      // 颜色渐变添加的方法\r\n      if (option.series) {\r\n      \tfor (let i in option.series) {\r\n      \t\tlet linearGradient = option.series[i].linearGradient\r\n      \t\tif (linearGradient) {\r\n      \t\t\toption.series[i].color = new echarts.graphic.LinearGradient(linearGradient[0],linearGradient[1],linearGradient[2],linearGradient[3],linearGradient[4])\r\n      \t\t}\r\n      \t}\r\n      }\r\n      cfe.instance[cid].setOption(option, option.notMerge)\r\n      cfe.instance[cid].on('finished', function(){\r\n        that[cid].callMethod('emitMsg',{name:\"complete\",params:{type:\"complete\",complete:true,id:cid}})\r\n        if(cfe.instance[cid]){\r\n          cfe.instance[cid].off('finished')\r\n        }\r\n      })\r\n    },\r\n    tooltipPosition(){\r\n      return (point, params, dom, rect, size) => {\r\n      \tlet x = point[0]\r\n      \tlet y = point[1]\r\n      \tlet viewWidth = size.viewSize[0]\r\n      \tlet viewHeight = size.viewSize[1]\r\n      \tlet boxWidth = size.contentSize[0]\r\n      \tlet boxHeight = size.contentSize[1]\r\n      \tlet posX = x + 30 \r\n      \tlet posY = y + 30 \r\n      \tif (posX + boxWidth > viewWidth) { \r\n      \t\tposX = x - boxWidth - 30\r\n      \t}\r\n      \tif (posY + boxHeight > viewHeight) {\r\n      \t\tposY = y - boxHeight - 30\r\n      \t}\r\n      \treturn [posX, posY]\r\n      }\r\n    },\r\n    //==============以下是uCharts的方法====================\r\n    ucinit(newVal, oldVal, owner, instance){\r\n      let cid = JSON.parse(JSON.stringify(newVal.canvasId))\r\n      this.rid = cid\r\n      that[cid] = this.$ownerInstance\r\n      cfu.option[cid] = JSON.parse(JSON.stringify(newVal))\r\n      cfu.option[cid] = rdformatterAssign(cfu.option[cid],cfu.formatter)\r\n      let canvasdom = document.getElementById(cid)\r\n      if(canvasdom && canvasdom.children[0]){\r\n        cfu.option[cid].context = canvasdom.children[0].getContext(\"2d\")\r\n        this.newUChart()\r\n      }\r\n    },\r\n    newUChart() {\r\n      let cid = this.rid\r\n      cfu.instance[cid] = new uChartsRD(cfu.option[cid])\r\n      cfu.instance[cid].addEventListener('renderComplete', () => {\r\n        that[cid].callMethod('emitMsg',{name:\"complete\",params:{type:\"complete\",complete:true,id:cid}})\r\n        cfu.instance[cid].delEventListener('renderComplete')\r\n      });\r\n      cfu.instance[cid].addEventListener('scrollLeft', () => {\r\n        that[cid].callMethod('emitMsg',{name:\"scrollLeft\",params:{type:\"scrollLeft\",scrollLeft:true,id:cid}})\r\n      });\r\n      cfu.instance[cid].addEventListener('scrollRight', () => {\r\n        that[cid].callMethod('emitMsg',{name:\"scrollRight\",params:{type:\"scrollRight\",scrollRight:true,id:cid}})\r\n      });\r\n    },\r\n    tooltipDefault(item, category, index, opts) {\r\n      if (category) {\r\n        let data = item.data\r\n        if(typeof item.data === \"object\"){\r\n          data = item.data.value\r\n        }\r\n        return category + ' ' + item.name + ':' + data;\r\n      } else {\r\n        if (item.properties !== undefined) {\r\n          return item.properties.name;\r\n        } else {\r\n          return item.name + ':' + item.data;\r\n        }\r\n      }\r\n    },\r\n    showTooltip(e,cid) {\r\n      let tc = cfu.option[cid].tooltipCustom\r\n      if (tc && tc !== undefined && tc !== null) {\r\n        let offset = undefined;\r\n        if (tc.x >= 0 && tc.y >= 0) {\r\n          offset = { x: tc.x, y: tc.y + 10 };\r\n        }\r\n        cfu.instance[cid].showToolTip(e, {\r\n          index: tc.index,\r\n          offset: offset,\r\n          textList: tc.textList,\r\n          formatter: (item, category, index, opts) => {\r\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\r\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\r\n            } else {\r\n              return this.tooltipDefault(item, category, index, opts);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        cfu.instance[cid].showToolTip(e, {\r\n          formatter: (item, category, index, opts) => {\r\n            if (typeof cfu.option[cid].tooltipFormat === 'string' && cfu.formatter[cfu.option[cid].tooltipFormat]) {\r\n              return cfu.formatter[cfu.option[cid].tooltipFormat](item, category, index, opts);\r\n            } else {\r\n              return this.tooltipDefault(item, category, index, opts);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n    tap(e) {\r\n      let cid = this.rid\r\n      let ontap = cfu.option[cid].ontap\r\n      let tooltipShow = cfu.option[cid].tooltipShow\r\n      if(ontap == false) return;\r\n      let currentIndex=null\r\n      let legendIndex=null\r\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\r\n      let tmpe = {}\r\n      if(e.detail.x){//tap或者click的事件\r\n        tmpe = { x: e.detail.x - rchartdom.left, y:e.detail.y - rchartdom.top + rootdom.top}\r\n      }else{//mouse的事件\r\n        tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\r\n      }\r\n      e.changedTouches.unshift(tmpe)\r\n      currentIndex=cfu.instance[cid].getCurrentDataIndex(e)\r\n      legendIndex=cfu.instance[cid].getLegendDataIndex(e)\r\n      cfu.instance[cid].touchLegend(e)\r\n      if(tooltipShow==true){\r\n        this.showTooltip(e,cid)\r\n      }\r\n      that[cid].callMethod('emitMsg',{name:\"getIndex\",params:{type:\"getIndex\",event:tmpe,currentIndex:currentIndex,legendIndex:legendIndex,id:cid}})\r\n    },\r\n    touchStart(e) {\r\n      let cid = this.rid\r\n      let ontouch = cfu.option[cid].ontouch\r\n      if(ontouch == false) return;\r\n      cfu.instance[cid].scrollStart(e)\r\n      that[cid].callMethod('emitMsg',{name:\"getTouchStart\",params:{type:\"touchStart\",event:e.changedTouches[0],id:cid}})\r\n    },\r\n    touchMove(e) {\r\n      let cid = this.rid\r\n      let ontouch = cfu.option[cid].ontouch\r\n      if(ontouch == false) return;\r\n      cfu.instance[cid].scroll(e)\r\n      that[cid].callMethod('emitMsg',{name:\"getTouchMove\",params:{type:\"touchMove\",event:e.changedTouches[0],id:cid}})\r\n      if(cfu.option[cid].ontap === true && cfu.option[cid].enableScroll === false && cfu.option[cid].onmovetip === true){\r\n        let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\r\n        let tmpe = { x: e.changedTouches[0].clientX - rchartdom.left, y:e.changedTouches[0].clientY - rchartdom.top + rootdom.top}\r\n        e.changedTouches.unshift(tmpe)\r\n        if(cfu.option[cid].tooltipShow === true){\r\n          this.showTooltip(e,cid)\r\n        }\r\n      }\r\n    },\r\n    touchEnd(e) {\r\n      let cid = this.rid\r\n      let ontouch = cfu.option[cid].ontouch\r\n      if(ontouch == false) return;\r\n      cfu.instance[cid].scrollEnd(e)\r\n      that[cid].callMethod('emitMsg',{name:\"getTouchEnd\",params:{type:\"touchEnd\",event:e.changedTouches[0],id:cid}})\r\n    },\r\n    mouseDown(e) {\r\n      let cid = this.rid\r\n      let onmouse = cfu.option[cid].onmouse\r\n      if(onmouse == false) return;\r\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\r\n      let tmpe = {}\r\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\r\n      e.changedTouches.unshift(tmpe)\r\n      cfu.instance[cid].scrollStart(e)\r\n      cfu.option[cid].mousedown=true;\r\n      that[cid].callMethod('emitMsg',{name:\"getTouchStart\",params:{type:\"mouseDown\",event:tmpe,id:cid}})\r\n    },\r\n    mouseMove(e) {\r\n      let cid = this.rid\r\n      let onmouse = cfu.option[cid].onmouse\r\n      let tooltipShow = cfu.option[cid].tooltipShow\r\n      if(onmouse == false) return;\r\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\r\n      let tmpe = {}\r\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\r\n      e.changedTouches.unshift(tmpe)\r\n      if(cfu.option[cid].mousedown){\r\n        cfu.instance[cid].scroll(e)\r\n        that[cid].callMethod('emitMsg',{name:\"getTouchMove\",params:{type:\"mouseMove\",event:tmpe,id:cid}})\r\n      }else if(cfu.instance[cid]){\r\n        if(tooltipShow==true){\r\n          this.showTooltip(e,cid)\r\n        }\r\n      }\r\n    },\r\n    mouseUp(e) {\r\n      let cid = this.rid\r\n      let onmouse = cfu.option[cid].onmouse\r\n      if(onmouse == false) return;\r\n      let rchartdom = document.getElementById('UC'+cid).getBoundingClientRect()\r\n      let tmpe = {}\r\n      tmpe = { x: e.clientX - rchartdom.left, y:e.clientY - rchartdom.top + rootdom.top}\r\n      e.changedTouches.unshift(tmpe)\r\n      cfu.instance[cid].scrollEnd(e)\r\n      cfu.option[cid].mousedown=false;\r\n      that[cid].callMethod('emitMsg',{name:\"getTouchEnd\",params:{type:\"mouseUp\",event:tmpe,id:cid}})\r\n    },\r\n  }\r\n}\r\n</script>\r\n<!-- #endif -->\r\n\r\n<style scoped>\r\n.chartsview {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./qiun-data-charts.vue?vue&type=style&index=0&id=f10dbef8&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./qiun-data-charts.vue?vue&type=style&index=0&id=f10dbef8&scoped=true&lang=css&\""],"sourceRoot":""}